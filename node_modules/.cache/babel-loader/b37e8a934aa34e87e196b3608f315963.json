{"ast":null,"code":"var _jsxFileName = \"/Users/heralvarado/Documents/Personal/Openmind/opencardsweb/visualvoicescard/src/views/SurveyQuestions/index.js\",\n    _s = $RefreshSig$();\n\nimport { useNavigate, useParams } from \"react-router\";\nimport { useState } from \"react\";\nimport { useFetchSurveyQuestionsQuery, useAddNewAnswerMutation } from \"../../redux/api/survey\";\nimport ListQuestions from \"./Components/listQuestions\";\nimport HeaderSurvey from \"../../commons/survey/headerSurvey\";\nimport Loading from \"../../commons/survey/loading\";\nimport { isMobile } from \"react-device-detect\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SurveyQuestions = () => {\n  _s();\n\n  const navigate = useNavigate();\n  let objSurvey = JSON.parse(sessionStorage.getItem(\"survey\"));\n  var idProyecto = objSurvey.id_Proyecto;\n  var codUser = objSurvey.codSuscriptor;\n  const {\n    surveyId\n  } = useParams();\n  var size = 0;\n  if (isMobile) size = process.env.REACT_APP_QUESTIONS_MOBILE;else size = process.env.REACT_APP_QUESTIONS_DESKTOP;\n  const [page, setPage] = useState(1);\n  const {\n    data: survey,\n    isLoading,\n    isSuccess,\n    isFetching,\n    error\n  } = useFetchSurveyQuestionsQuery({\n    idProyecto,\n    codUser,\n    page,\n    size\n  });\n  const [addNewAnswer, response] = useAddNewAnswerMutation();\n\n  const handleSaveClick = data => {\n    let formData = {\n      codUser: objSurvey.codSuscriptor,\n      codTermometro: objSurvey.codTermometroProyecto,\n      listQuestions: data\n    };\n    addNewAnswer(formData).unwrap().then(() => {}).then(error => {\n      console.log(error);\n    });\n    if (objInfo.totalPage != page) setPage(page + 1);else navigate(`/survey/${surveyId}/thanks`);\n  };\n\n  const handleBtnBack = () => {\n    if (page > 1) setPage(page - 1);else navigate(`/survey/${surveyId}/demographic`);\n  };\n\n  var totalPage = Math.ceil(objSurvey.cantidadPreguntas / size);\n  var objInfo = {\n    advance: Math.round(page / totalPage * 100),\n    actualPage: page,\n    totalPage: totalPage\n  };\n\n  const renderContent = () => {\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-full\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xl\",\n          children: error.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this);\n    } else if (isLoading || isFetching) return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 48\n    }, this);else if (isSuccess) {\n      return /*#__PURE__*/_jsxDEV(ListQuestions, {\n        data: survey,\n        objInfo: objInfo,\n        onBtnSaveClick: handleSaveClick,\n        onBtnBack: handleBtnBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderSurvey, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-11/12 max-w-screen-2xl mx-auto flex flex-col lg:items-start\",\n      children: renderContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(SurveyQuestions, \"HiZOiOFZl+pcKpVbmDcHoO6O3ao=\", false, function () {\n  return [useNavigate, useParams, useFetchSurveyQuestionsQuery, useAddNewAnswerMutation];\n});\n\n_c = SurveyQuestions;\nexport default SurveyQuestions;\n\nvar _c;\n\n$RefreshReg$(_c, \"SurveyQuestions\");","map":{"version":3,"names":["useNavigate","useParams","useState","useFetchSurveyQuestionsQuery","useAddNewAnswerMutation","ListQuestions","HeaderSurvey","Loading","isMobile","SurveyQuestions","navigate","objSurvey","JSON","parse","sessionStorage","getItem","idProyecto","id_Proyecto","codUser","codSuscriptor","surveyId","size","process","env","REACT_APP_QUESTIONS_MOBILE","REACT_APP_QUESTIONS_DESKTOP","page","setPage","data","survey","isLoading","isSuccess","isFetching","error","addNewAnswer","response","handleSaveClick","formData","codTermometro","codTermometroProyecto","listQuestions","unwrap","then","console","log","objInfo","totalPage","handleBtnBack","Math","ceil","cantidadPreguntas","advance","round","actualPage","renderContent"],"sources":["/Users/heralvarado/Documents/Personal/Openmind/opencardsweb/visualvoicescard/src/views/SurveyQuestions/index.js"],"sourcesContent":["import { useNavigate, useParams } from \"react-router\";\nimport { useState } from \"react\";\nimport {\n  useFetchSurveyQuestionsQuery,\n  useAddNewAnswerMutation,\n} from \"../../redux/api/survey\";\nimport ListQuestions from \"./Components/listQuestions\";\nimport HeaderSurvey from \"../../commons/survey/headerSurvey\";\nimport Loading from \"../../commons/survey/loading\";\nimport { isMobile } from \"react-device-detect\";\n\nconst SurveyQuestions = () => {\n  const navigate = useNavigate();\n\n  let objSurvey = JSON.parse(sessionStorage.getItem(\"survey\"));\n  var idProyecto = objSurvey.id_Proyecto;\n  var codUser = objSurvey.codSuscriptor;\n\n  const { surveyId } = useParams();\n\n  var size = 0;\n  if (isMobile) size = process.env.REACT_APP_QUESTIONS_MOBILE;\n  else size = process.env.REACT_APP_QUESTIONS_DESKTOP;\n  const [page, setPage] = useState(1);\n\n  const {\n    data: survey,\n    isLoading,\n    isSuccess,\n    isFetching,\n    error,\n  } = useFetchSurveyQuestionsQuery({ idProyecto, codUser, page, size });\n\n  const [addNewAnswer, response] = useAddNewAnswerMutation();\n\n  const handleSaveClick = (data) => {\n    let formData = {\n      codUser: objSurvey.codSuscriptor,\n      codTermometro: objSurvey.codTermometroProyecto,\n      listQuestions: data,\n    };\n\n\n    addNewAnswer(formData)\n      .unwrap()\n      .then(() => {})\n      .then((error) => {\n        console.log(error);\n      });\n\n    if (objInfo.totalPage != page) setPage(page + 1);\n    else navigate(`/survey/${surveyId}/thanks`);\n  };\n\n  const handleBtnBack = () => {\n    if (page > 1) setPage(page - 1);\n    else navigate(`/survey/${surveyId}/demographic`);\n  };\n\n  var totalPage = Math.ceil(objSurvey.cantidadPreguntas / size);\n  var objInfo = {\n    advance: Math.round((page / totalPage) * 100),\n    actualPage: page,\n    totalPage: totalPage,\n  };\n\n  const renderContent = () => {\n    if (error) {\n      return (\n        <div className=\"flex items-center justify-center h-full\">\n          <p className=\"text-xl\">{error.error}</p>\n        </div>\n      );\n    } else if (isLoading || isFetching) return <Loading />;\n    else if (isSuccess) {\n      return (\n        <ListQuestions\n          data={survey}\n          objInfo={objInfo}\n          onBtnSaveClick={handleSaveClick}\n          onBtnBack={handleBtnBack}\n        />\n      );\n    }\n  };\n\n  return (\n    <>\n      <HeaderSurvey />\n\n      <div className=\"w-11/12 max-w-screen-2xl mx-auto flex flex-col lg:items-start\">\n        {renderContent()}\n      </div>\n    </>\n  );\n};\n\nexport default SurveyQuestions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}